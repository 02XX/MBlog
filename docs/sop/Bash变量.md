---
title: Bash变量
tags: []
categories:
  - [未分类]
date: 2023-04-04T00:49:29.000Z
updated: 2024-10-14T13:55:03.112Z
comments: false

---

<!--more-->
# Bash变量

## 用户自定义变量（本地变量）

### 变量

1. 在Bash中，变量的默认类型都是字符串类型，如果要进行数值运算则必须指定变量类型为数值型

变量用等号连接，等号两边不能有空格

2. 变量的值如果有空格，需要用单引号或双引号包括

3. 变量的值中可以用\转义符

4. 如果需要增加变量的值，那么可以进行变量值的叠加，不过变量需要用双引号包含“$变量名”或用${变量名}包含
5. 如果需要将命令的结果作为变量赋予变量，则需要使用反引号或$()包含命令
6. 环境变量名建议大写，便于区分

### 变量的分类

1. 用户自定义变量
2. 环境变量：这种变量中主要保存的是和系统操作环境相关的数据。
3. 位置参数变量：这种变量主要是用来向脚本当中传递参数或数据的，变量名不能自定义，变量作用是固定的。
4. 预定义变量：是Bash中已经定义好的变量，变量名不能自定义，变量作用也是固定的。

## 环境变量

用户自定义变量只在当前的Shell中生效，而环境变量会在当前Shell和这个Shell的所有子Shell当中生效。如果把环境变量写入相应的配置文件，那么这个环境变量就会在所有的Shell中生效

### 设置环境变量

```bash
export name=value #设置环境变量
env #查看环境变量
unset 变量名 #删除变量
```

使用set查看变量（不止环境变量），env只能看环境变量

使用pstree查看当前所在的shell

```bash
name=ali #父级shell的本地变量
export sex=male #所有shell的环境变量（全局变量）
bash #创建子shell
age=18 #子shell的本地变量
```

在父级shell中只能看到name和sex，在子shell中只能看到age和sex

### PATH

PATH是系统命令查找的路径

PATH叠加

```bash
PATH="$PATH":变量路径
```

### PS1

| 提示符 | 含义                                 |
| ------ | ------------------------------------ |
| `\d`     | 显示日期，格式为"星期 月 日"         |
| `\h`     | 显示简写主机名                       |
| `\T`     | 显示12小时制时间，格式为"HH:MM:SS"   |
| `\t`     | 显示24小时制时间，格式为"HH:MM:SS"   |
| `\A`     | 显示24小时制时间，格式为"HH:MM"      |
| `\u`     | 显示当前用户名                       |
| `\w`     | 显示当前所在路径的完整名称           |
| `\W`     | 显示当前所在目录的最后一个目录       |
| `\#`   | 执行的第几个命令                     |
| `\$`     | 提示符，root用户为"#"，普通用户为"$" |
| `\!` | 显示该命令的历史记录编号。 |

PS1是系统提示符的变变量

例如

`PS1=[\u@\h \W]\$ `

```bash
[root@izbp1clp96b0qjo5whikc9z ~]#
```



## 位置参数变量

| 变量        | 含义                                                         |
| :---------- | :----------------------------------------------------------- |
| `$0`        | 当前脚本的文件名。                                           |
| `$n`（n≥1） | 传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是 $1，第二个参数是 $2。10以上的参数用大括号${11} |
| `$#`        | 传递给脚本或函数的参数个数。                                 |
| `$*`        | 传递给脚本或函数的所有参数。把所有参数看作一个整体           |
| `$@`        | 传递给脚本或函数的所有参数。不过$@把每个参数区分对待，当被双引号`" "`包含时，$@ 与 $* 稍有不同 |
| `$?`        | 上个命令的退出状态，或函数的返回值                           |
| `$$`        | 当前 Shell 进程 ID。对于Shell 脚本，就是这些脚本所在的进程 ID。 |

num.sh

```bash
#!/bin/bash
num1=$1
num2=$2
result=$(($num1+$num2))
echo $result
```

```bash
[root@izbp1clp96b0qjo5whikc9z ~]# chmod 755 num.sh
[root@izbp1clp96b0qjo5whikc9z ~]# ./num.sh 1 2
3
```

## 预定义变量

| 预定义变量 | 作 用                                                        |
| ---------- | ------------------------------------------------------------ |
| $?         | 最后一次执行的命令的返回状态。如果这个变量的值为 0，则证明上一条命令正确执行；如果这 个变量的值为非 0 (具体是哪个数由命令自己来决定)，则证明上一条命令执行错误 |
| $$         | 当前进程的进程号（PID)                                       |
| $!         | 后台运行的最后一个进程的进程号（PID)                         |

### 键盘输入

```bash
read [选项] [变量名]
	-p "提示信息"：在等待read输入时，输出提示信息
	-t 时间（秒数）：read命令会一直等待用户输入，使用此命令可以设置等待时间
	-n 字符数：接受指定字符数
	-s ：隐藏输入的数据，适用于密码输入
```

 ## 变量声明

```bash
declare [+/-] [选项] 变量名
		-:给变量设置类型属性
		+：取消变量类型属性
		-i：将变量声明为整数型
		-x：将变量声明为环境变量
		-p：显示指定变量的被声明的类型
```



<!-- more -->---
    title: 你好世界
    date: 2021-05-10 11:46:40
    tags: C++
    ---
    <!-- more -->---
    title: 你好世界
    date: 2021-05-10 11:46:40
    tags: C++
    ---
    <!-- more -->---
    title: 你好世界
    date: 2021-05-10 11:46:40
    tags: C++
    ---
    ---
    title: �������
    date: 2021-05-10 11:46:40
    tags: C++
    ---