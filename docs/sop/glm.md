---
title: glm
tags:
  - 计算机图形学
categories:
  - [计算机图形学]
date: 2024-11-16T14:31:48.154Z
updated: 2024-11-16T14:42:46.281Z
comments: true

---

<!--more-->
## GLM库的矩阵乘法

glm默认按列优先存储，所以他的矩阵乘法要反着乘。

只要将按行输入的glm看成正常矩阵的转置进行计算就OK了

例如

对于两个矩阵 A @ B

$$
A = 
\begin{bmatrix}
1 &2&3&4\\
4&3&2&1\\
5&6&7&8
\end{bmatrix}
B = 
\begin{bmatrix}
1&2&3\\
4&5&6\\
7&8&9\\
3&2&1
\end{bmatrix}
C=A*B
$$

```c++
glm::mat3x4 a(1, 2, 3, 4, 4, 3, 2, 1, 5, 6, 7, 8);
glm::mat4x3 b(1, 2, 3, 4, 5, 6, 7, 8, 9, 3, 2, 1);
glm::mat3x3 c = b*a;
```

这里输入是行优先输入。但是glm会把(1, 2, 3, 4, 4, 3, 2, 1, 5, 6, 7, 8)翻译成(1,2,3//4,4,3//2,1,5//6,7,8)，以列优先的顺序翻译。因此a实际上是 $A^T$

因此如果想要计算正确的 $A*B$

$$
b * a = B^T * A^T = (AB)^T = C^T = c
$$

c也是列优先存储

> 把行优先输入到glm的矩阵 a b c统统看作A B C的转置